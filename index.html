<!DOCTYPE html>
<html>
<head lang="en">
    <link rel="stylesheet" type="text/css" href="main.css">
    <script type="text/javascript">
        var globalPlayerID = 0;

        function addPlayer (playerId) {
            var playerColumnId = "Column" + playerId;
            var playerScoreId = "Score" + playerId;
            var playerNameId = "Player" + playerId;
            var scoreHistoryId = "ScoreHistory" + playerId;

            var playerList = document.getElementById("playerList");

            var playerColumn = "<div class=playerColumn id="+playerColumnId+">";
            var playerNameDiv = "<div class=nameData id= "+playerNameId+"> "+playerNameId+" </div>";
           // var playerScoreDiv = "<div class=scoreData id="+playerScoreId+"> 0 </div>";
            var playerScoreDiv = "<div class=scoreData id="+playerScoreId+" onclick='enterScore("+playerId+")'>0</div>";
            var scoreHistoryDiv = "<div id="+scoreHistoryId+"> </div>";
            var scoreButton1 = "<input class=scoreButtonData type='button' value='-10' onclick='changeScore("+playerId+", -10)'/>";
            var scoreButton2 = "<input class=scoreButtonData type='button' value='+10' onclick='changeScore("+playerId+", +10)'/>";
            var deletePlayerButton = "<input class=deletePlayerButtonData type='button' value='Delete' onclick='deletePlayer("+playerId+")'/>";

            playerColumn += deletePlayerButton+scoreButton1+scoreButton2+playerNameDiv+playerScoreDiv+scoreHistoryDiv;
            playerColumn += "</div>";
            playerList.innerHTML += playerColumn;

            //check playerColumn <div> composition
            console.log (playerColumn);
        }

        function changeScore (id, change) {
            var playerScoreId = "Score" + id;
            var scoreHistoryId = "ScoreHistory" + id;
            var playerScoreValue = document.getElementById(playerScoreId);
            var playerScoreHistory = document.getElementById(scoreHistoryId);
            var scoreInt = parseInt(playerScoreValue.innerHTML);

            playerScoreValue.innerHTML = scoreInt + change;

            if (change>0) {
                playerScoreHistory.innerHTML = "<div class=scoreHistoryData id="+playerScoreId+"> "+scoreInt+"<span class=scoreHistoryIncrease> +"+change+"</span></div>" + playerScoreHistory.innerHTML;
            }
            else {
                playerScoreHistory.innerHTML = "<div class=scoreHistoryData id="+scoreHistoryId+">"+scoreInt+"<span class=scoreHistoryDecrease> "+change+"</span></div>" + playerScoreHistory.innerHTML;
            }
        }

        function deletePlayer (id) {
            var playerColumnId = "Column" + id;
            var playerList = document.getElementById("playerList");
            var playerColumn = document.getElementById(playerColumnId);

            playerList.removeChild(playerColumn);
        }

        function enterScore (id) {
            var inputScoreTxtFieldId = "InputScore" + id;
            var playerScoreId = "Score" + id;
            var playerScoreValue = document.getElementById(playerScoreId);

            console.log (document.getElementById(inputScoreTxtFieldId));

            if (document.getElementById(inputScoreTxtFieldId) === null) {
                playerScoreValue.innerHTML = "<input id="+inputScoreTxtFieldId+" type='text' onkeypress='isEnterPushed(event)' onblur='isFocusLost(event)'/>";
            }

            console.log (document.getElementById(inputScoreTxtFieldId));

        }

        function isEnterPushed(event) {
            if (event.keyCode == 13){
                console.log ("Enter!");
            }
        }

        function isFocusLost (event) {
            if (event.type == 'blur') {
                console.log ("We lost focus");

            }
        }

    </script>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<input type='button' value='Add Player' onclick='addPlayer(globalPlayerID); globalPlayerID +=1;'/>
<div id="playerList">
</div>
</body>
</html>